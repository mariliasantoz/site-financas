<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Painel Financeiro</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <style>
      /* CONFIGURAÇÃO GERAL */
      body {
        font-family: Arial, sans-serif; /* [116] */
        background-color: #f2f2f2; /* [116] */
        margin: 0;
        padding: 20px;
        color: black; /* Texto padrão em preto */
      }
      .container {
        max-width: 1200px; /* [117] */
        margin: auto; /* [117] */
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
      }
      /* Caixas (exceto o container principal) */
      .totals-section,
      .categorias-section,
      /* .form-sections-wrapper, */ /* Removido daqui para não ser uma caixa azul */
      .form-section, /* Aplicar a cada form individual - AGORA SERÁ UMA CAIXA AZUL */ /* [118] */
      .cartoes-section,
      .compras-responsaveis,
      .categoria-box,
      .responsavel-box,
      .cartao-box {
        background-color: #e3f2fd; /* [118] */
        border: 1px solid #90caf9; /* [118] */
        border-radius: 5px;
        margin-bottom: 20px; /* Espaçamento entre seções */ /* [118] */
        padding: 15px; /* [119] */
      }
      /* BOTÕES */
      button {
        background-color: #4caf50; /* [120] */
        color: #fff; /* [120] */
        border: none;
        border-radius: 5px;
        padding: 8px 12px;
        cursor: pointer;
        font-size: 0.9em;
        transition: background-color 0.3s ease; /* [121] */
      }
      button:hover {
        background-color: #45a049; /* [122] */
      }
      button.delete-button {
        background-color: #f44336; /* [123] */
        margin-left: 5px; /* [123] */
      }
      button.delete-button:hover {
        background-color: #da190b; /* [124] */
      }
      button.edit-button {
        background-color: #ff9800; /* [125] */
        margin-left: 5px; /* [125] */
      }
      button.edit-button:hover {
        background-color: #e68a00; /* [126] */
      }
      /* CABEÇALHO */
      header {
        text-align: center; /* [127] */
        margin-bottom: 20px; /* [127] */
        position: relative;
      }
      header h1 {
        color: #333; /* [128] */
        margin-bottom: 10px; /* [128] */
      }
      header h2 {
        color: #555; /* [129] */
        margin-top: 0; /* [129] */
        display: block; /* Corrigido: para que o h2 ocupe sua própria linha */
        position: relative; /* [130] */
        padding: 0; /* Corrigido: remover padding horizontal */
        z-index: 10; /* Corrigido: garantir que o nome do mês fique acima dos botões */
      }
      .nav-buttons {
          position: relative; /* Corrigido: para que os botões fiquem abaixo do h2 */
          top: auto; /* Corrigido */
          transform: none; /* Corrigido */
          width: 100%;
          display: flex;
          justify-content: space-between;
          padding: 0 20px;
          box-sizing: border-box; /* [132] */
          left: 0; /* [133] */
          z-index: 1; /* Corrigido: garantir que os botões fiquem atrás do nome do mês */
      }
      .nav-buttons button {
          background-color: #007bff; /* [134] */
          color: white; /* [134] */
          padding: 5px 10px;
          border: none;
          border-radius: 5px;
          cursor: pointer;
          font-size: 1em; /* [135] */
      }
      .nav-buttons button:hover {
          background-color: #0056b3; /* [136] */
      }
      /* SEÇÃO DE TOTAIS */
      .totals-section {
        /* Herda padding e margin-bottom da regra geral de caixas */
      }
      .totals-wrapper {
        display: flex; /* [139] */
        justify-content: space-around; /* [139] */
        margin-bottom: 15px;
        font-weight: bold;
        color: #333;
      }
      .saldo-bar-container {
        background-color: white; /* Corrigido: termômetro branco */
        border-radius: 5px; /* [140] */
        height: 25px;
        margin-top: 10px;
        overflow: hidden; /* [141] */
        position: relative; /* [141] */
      }
      .saldo-bar {
        height: 100%;
        width: 0%; /* [142] */
        background-color: green; /* Cor padrão inicial, será ajustada via JS */ /* [143] */
        border-radius: 5px; /* [144] */
        transition: width 0.5s ease-in-out, background-color 0.5s ease-in-out; /* [144] */
      }
      .saldo-label {
        position: absolute; /* [146] */
        top: 0; /* [146] */
        left: 0; /* [146] */
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: black; /* Corrigido: fonte preta */
        font-weight: bold; /* [147] */
        text-shadow: none; /* Corrigido: removido shadow para melhor contraste */
        font-size: 0.9em;
        border-radius: 5px;
        box-sizing: border-box;
      }
      /* SEÇÃO DE CATEGORIAS (Receitas, Contas Fixas, Variáveis) */
      .categorias-section {
         /* Herda padding e margin-bottom da regra geral de caixas */
      }
      .categorias-columns {
        display: grid; /* [150] */
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* [150] */
        gap: 20px;
      }
      .categoria-box {
        text-align: center;
        display: flex; /* [152] */
        flex-direction: column; /* [152] */
         /* Herda padding e margin-bottom da regra geral de caixas */
      }
      .categoria-box h3 {
        margin-top: 0;
        color: #333; /* [153] */
      }
      .categoria-list {
        text-align: left;
        margin-bottom: 10px; /* [154] */
        flex-grow: 1; /* [154] */
        min-height: 50px; /* [155] */
      }
      .categoria-list p {
        margin: 5px 0; /* [156] */
        color: #555; /* [156] */
      }
      .list-item {
        display: flex; /* [157] */
        justify-content: space-between; /* [157] */
        align-items: center;
        padding: 5px 0;
        border-bottom: 1px dashed #c0c0c0; /* [158] */
      }
      .list-item:last-child {
        border-bottom: none; /* [159] */
      }
      .list-item span {
        flex-grow: 1;
        text-align: left; /* [160] */
        margin-right: 10px; /* [160] */
      }
      .list-item-controls {
          display: flex; /* [161] */
          justify-content: flex-end; /* [161] */
          align-items: center;
          flex-shrink: 0;
      }
      .list-item-controls button {
          margin-left: 5px; /* [162] */
          padding: 4px 8px; /* [162] */
          font-size: 0.8em;
      }
      .list-item-controls input[type="checkbox"] {
          margin-left: 5px; /* [163] */
          width: 16px; /* [163] */
          height: 16px; /* [163] */
      }
      .categoria-box .total-categoria {
        font-weight: bold; /* [164] */
        margin-top: 10px; /* [164] */
        padding-top: 10px;
        border-top: 1px solid #c0c0c0;
        display: flex; /* [165] */
        justify-content: space-between; /* [165] */
        align-items: center; /* [165] */
      }
      .total-categoria .checkbox-pago-total {
          margin-left: 10px; /* [166] */
          width: 20px; /* [166] */
          height: 20px; /* [167] */
          cursor: pointer; /* [167] */
      }
      /* SEÇÃO DE CARTÕES */
      .cartoes-section {
        /* Herda padding e margin-bottom da regra geral de caixas */
      }
      .cartoes-grid {
        display: grid; /* [170] */
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* [171] */
        gap: 20px; /* [171] */
      }
      .cartao-box {
        text-align: center;
        display: flex;
        flex-direction: column;
        /* Herda padding, margin-bottom, border e background da regra geral de caixas,
           mas cores específicas abaixo podem sobrescrever o background/border. */
      }
      .cartao-box.nubank { background-color: #f3e5f5; border: 1px solid #ce93d8; } /* [173] */
      .cartao-box.santander { background-color: #ffebee; border: 1px solid #ef9a9a; } /* [174] */
      .cartao-box.mercadopago { background-color: #e3f2fd; border: 1px solid #90caf9; } /* [175] */
      .cartao-box.amazon { background-color: #fff3e0; border: 1px solid #ffcc80; } /* [176] */
      .cartao-box h3 {
        margin-top: 0;
        color: #333; /* [177] */
      }
      .cartao-list {
        text-align: left;
        margin-bottom: 10px; /* [178] */
        flex-grow: 1; /* [178] */
        min-height: 50px;
        max-height: 400px; /* NOVO: Altura máxima para scroll */
        overflow-y: auto; /* NOVO: Scroll vertical */
        padding-right: 5px; /* NOVO: Espaço para a barra de scroll */
      }
      .cartao-list p {
        margin: 5px 0; /* [179] */
        color: #555; /* [179] */
      }
      .cartao-box .total-cartao {
        font-weight: bold; /* [180] */
        margin-top: 10px; /* [180] */
        padding-top: 10px;
        border-top: 1px solid #a7d9f7;
        display: flex; /* [181] */
        justify-content: space-between; /* [181] */
        align-items: center; /* [181] */
      }
      .cartao-box .total-cartao .checkbox-pago-total {
          margin-left: 10px; /* [182] */
          width: 20px; /* [182] */
          height: 20px; /* [182] */
          cursor: pointer;
      }
      .compra {
        display: flex; /* [183] */
        justify-content: space-between; /* [183] */
        align-items: center;
        padding: 5px;
        border-bottom: 1px dashed #c0c0c0;
        border-radius: 3px; /* [184] */
        margin-bottom: 3px; /* [185] */
      }
      .compra:last-child {
        border-bottom: none; /* [186] */
      }
      .compra .list-item-content {
          flex-grow: 1; /* [187] */
          display: flex; /* [187] */
          justify-content: space-between;
          align-items: center;
          margin-right: 5px;
      }
      .compra .list-item-content span {
          flex-grow: 1; /* [188] */
          text-align: left; /* [188] */
          font-size: 0.9em;
      }
      .compra .list-item-controls {
          flex-shrink: 0; /* [189] */
      }
      /* SEÇÃO DE FORMULÁRIOS */
      .form-sections-wrapper { /* Agora é apenas um container flexível */
        display: flex; /* [190] */
        gap: 20px; /* [190] */
        margin-bottom: 20px; /* Para espaçar do próximo elemento */
      }
      .form-section { /* Cada form agora é uma caixa azul */
        flex: 1; /* [191] */
        text-align: center; /* [191] */
        /* background-color, border, padding, border-radius, margin-bottom
           são herdados da regra geral de caixas no início do <style> */
      }
      .form-section h2 {
        margin-top: 0;
        margin-bottom: 15px; /* [193] */
        color: #333; /* [193] */
      }
      .form-section label { 
        display: block; /* [194] */
        margin-bottom: 5px; /* [194] */
        text-align: left;
        font-weight: bold;
        font-size: 0.9em;
      }
      .form-section input[type="text"],
      .form-section input[type="number"],
      .form-section select {
        width: 100%; /* [195] */
        padding: 8px; /* [195] */
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box; /* [196] */
      }
      .form-section .row {
        display: flex;
        gap: 10px; /* [197] */
        margin-bottom: 10px; /* [197] */
        align-items: center; 
      }
      .form-section .row input,
      .form-section .row select {
        flex-grow: 1; /* [198] */
        margin-bottom: 0; /* [198] */
      }
      .form-section button {
        width: 100%; /* [199] */
        margin-top: 10px; /* [199] */
      }
      /* SEÇÃO DE COMPRAS POR RESPONSÁVEL */
      .compras-responsaveis {
        text-align: center; /* [200] */
         /* Herda padding e margin-bottom da regra geral de caixas */
      }
      .compras-responsaveis h2 {
        margin-top: 0;
        color: #333; /* [201] */
      }
      .responsaveis-container {
        display: grid; /* [202] */
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); /* [202] */
        gap: 20px;
        margin-top: 15px;
      }
      .responsavel-box {
        text-align: center; /* [203] */
        /* Herda padding, margin-bottom, border e background da regra geral de caixas */
      }
      .responsavel-box h3 {
        margin-bottom: 10px;
        font-size: 1.2em; /* [204] */
        padding: 5px; /* [204] */
        border-radius: 3px;
        display: inline-block; /* [204] */
      }
      .responsavel-box p.total-responsavel {
        margin: 10px 0 5px 0; /* [205] */
        font-size: 1em; /* [205] */
        font-weight: bold;
        border-top: 1px solid #ccc; /* [206] */
        padding-top: 10px; /* [206] */
      }
      .responsavel-list {
          text-align: left; /* [207] */
          font-size: 0.9em; /* [207] */
          max-height: 150px; /* [208] */
          overflow-y: auto; /* [208] */
          padding-right: 5px; /* [208] */
          margin-top: 10px; /* [208] */
      }
       .responsavel-list .compra-item {
          display: flex; /* [209] */
          justify-content: space-between; /* [209] */
          padding: 3px 0;
          border-bottom: 1px dotted #eee;
       }
       .responsavel-list .compra-item:last-child {
           border-bottom: none; /* [210] */
       }
       .responsavel-list .compra-nome {
           flex-grow: 1; /* [211] */
           margin-right: 10px; /* [211] */
           white-space: nowrap;
           overflow: hidden;
           text-overflow: ellipsis;
       }
       .responsavel-list .compra-detalhes {
           flex-shrink: 0; /* [212] */
           white-space: nowrap; /* [212] */
       }
      /* Cores para Responsáveis */
      .responsavel-liana { background-color: #add8e6; } /* [213] */
      .responsavel-stefany { background-color: #ffb347; } /* [214] */
      .responsavel-marilia { background-color: #dda0dd; }
      .responsavel-nosso { background-color: #ffc0cb; } /* [215] */
      /* Cores para background de itens de compra */
      .compra-bg-liana { background-color: rgba(173, 216, 230, 0.3); } /* [216] */
      .compra-bg-stefany { background-color: rgba(255, 179, 71, 0.3); } /* [217] */
      .compra-bg-marilia { background-color: rgba(106, 90, 205, 0.4); } /* [218] */
      .compra-bg-nosso { background-color: rgba(255, 192, 203, 0.3); } /* [219] */
      /* RODAPÉ */
      footer {
        text-align: center; /* [220] */
        margin-top: 20px; /* [220] */
        padding-top:
